(function () {
    ClonerLog || (ClonerLog = console.log);


    window.GameDistribution = {
        SDK: function() {
            try {
                window.GD_OPTIONS && window.GD_OPTIONS.onEvent({
                    "name": "SDK_READY",
                    "message": "Everything is ready.",
                    "status": "success"
                });
            } catch (e) {}
            return {
                AdType: {
                    "Rewarded": "rewarded",
                    "Interstitial": "interstitial",
                    "Preroll": "interstitial",
                    "Midroll": "interstitial",
                    "Display": "display"
                },

                // ***** INIT *****
                getSession: function() {
                    return Promise.resolve(true);
                },

                Interstitial: function() {
                    ClonerLog("gdsdk.Interstitial", arguments);
                },

                preloadAd: function() {
                    ClonerLog("gdsdk.preloadAd");
                    try {
                        window.GD_OPTIONS.onEvent({
                        "name": "SDK_READY",
                        "message": "Everything is ready.",
                        "status": "success"
                        });
                    } catch (e) {}
                    return Promise.resolve();
                },

                cancelAd: function() {
                    return Promise.resolve();
                },

                showAd: async function (adType) {
                    ClonerLog("gdsdk.showAd", adType, arguments);
                    return new Promise((resolve)=> {
                        if (adType== "rewarded") {
                            return ClonerAdReward(()=> {
                                ClonerLog("gdsdk.showAd.ClonerAdReward", adType);
                                try {
                                    window.GD_OPTIONS && window.GD_OPTIONS.onEvent({
                                        name: "SDK_REWARDED_WATCH_COMPLETE",
                                        message: "Rewarded",
                                        status: "success",
                                    });
                                    window.GD_OPTIONS && window.GD_OPTIONS.onEvent({
                                        name: "SDK_GAME_START",
                                        message: "No Message",
                                    });
                                } catch (e) {}
                                resolve(true);
                            });
                        } else {
                            ClonerAd(()=> {
                                ClonerLog("gdsdk.showAd.ClonerAd", adType);
                                try {
                                    window.GD_OPTIONS && window.GD_OPTIONS.onEvent({
                                        name: "SDK_GAME_START",
                                        message: "No Message",
                                    });
                                } catch (e) {}
                                resolve(true);
                            });
                        }
                    });
                },

                showBanner: async function() {
                    ClonerLog("gdsdk.showBanner", arguments);
                    return new Promise((resolve)=> {
                        ClonerAd(()=> {
                            window.GD_OPTIONS && window.GD_OPTIONS.onEvent({
                                name: "SDK_GAME_START",
                                message: "Reward Skip!",
                            });
                            resolve(true);
                        });
                    });
                },

                // ***** EVENTS & LOGS *****
                sendEvent: function() {
                    ClonerLog("gdsdk.sendEvent", arguments);
                },

                openConsole: function() {
                    ClonerLog("gdsdk.openConsole", arguments);
                },

                leaderboard: {
                    "addScore": function() {
                    },
                    "show": function() {
                    }
                },
            }
        }
    }


    var gdsdk = new window.GameDistribution.SDK();
    window.gdsdk = gdsdk;
})();
